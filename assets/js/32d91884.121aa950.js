"use strict";(self.webpackChunk_autoviews_website=self.webpackChunk_autoviews_website||[]).push([[567],{6104:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>b,contentTitle:()=>f,default:()=>w,frontMatter:()=>h,metadata:()=>C,toc:()=>y});var t={};o.r(t),o.d(t,{dependencies:()=>m,files:()=>p,options:()=>c});var r={};o.r(r),o.d(r,{dependencies:()=>u,files:()=>l,options:()=>d});var a=o(7462),s=(o(7294),o(3905)),i=o(8155);const p={"/App.tsx":"import React from 'react';\nimport {\n    AutoView,\n    RepositoryProvider,\n    CoreSchemaMetaSchema\n} from '@autoviews/core';\n\nimport schema from './schema.json';\nimport {repo} from './repo';\n\nexport const App = () => {\n    const [value, setValue] = React.useState({});\n    const onChange = React.useCallback(e => setValue(e.target.value), []);\n\n    return (\n        <RepositoryProvider components={repo}>\n            <AutoView\n                schema={schema as CoreSchemaMetaSchema}\n                data={value}\n                onChange={onChange}\n            />\n        </RepositoryProvider>\n    );\n};\n\nexport default App;\n","/repo.tsx":"import React from 'react';\nimport {\n    AutoView,\n    AutoViewProps,\n    ComponentsRepo,\n    AutoFields,\n    RepositoryComponentByType,\n    changeEventHandler\n} from '@autoviews/core';\nimport {\n    TextField,\n    FormControl,\n    FormLabel,\n    RadioGroup,\n    FormControlLabel,\n    Radio\n} from '@mui/material';\n\nconst StringComponent: React.FC<AutoViewProps> = props => (\n    <FormControl\n        fullWidth\n        margin=\"normal\"\n    >\n        <TextField\n            variant=\"outlined\"\n            label={props.schema.title}\n            value={props.data}\n            onChange={changeEventHandler(props, e => e.target.value)}\n        />\n    </FormControl>\n);\n\nconst ObjectComponent: React.FC<AutoViewProps> = props => (\n    <>\n        {props.schema.oneOf && (\n            <RepositoryComponentByType\n                type={customOneOfType}\n                {...props}\n            />\n        )}\n        <AutoFields {...props} />\n    </>\n);\n\nconst OneOfAsEnumComponent: React.FC<AutoViewProps> = props => (\n    <FormControl\n        fullWidth\n        margin=\"normal\"\n    >\n        <FormLabel id={props.schema.title}>{props.schema.title}</FormLabel>\n        <RadioGroup\n            row\n            name={props.schema.title}\n            onChange={changeEventHandler(props, e => e.target.value)}\n            defaultValue={props.schema.oneOf[0].const}\n        >\n            {props.schema.oneOf!.map(item => (\n                <FormControlLabel\n                    key={item.const}\n                    value={item.const}\n                    control={<Radio />}\n                    label={item.title}\n                />\n            ))}\n        </RadioGroup>\n    </FormControl>\n);\n\nconst customOneOfType = Symbol('customOneOf');\nconst CustomOneOfComponent: React.FC<AutoViewProps> = props => {\n    const [option, setOption] = React.useState(0);\n\n    const onChange = React.useCallback<\n        React.ChangeEventHandler<HTMLSelectElement>\n    >(\n        e => {\n            setOption(parseInt(e.target.value, 10));\n        },\n        [setOption]\n    );\n\n    const optionSchema = {\n        title: 'Select contact',\n        oneOf: props.schema.oneOf?.map((_, index) => ({\n            const: index,\n            title: `Option #${index + 1}`\n        }))\n    };\n\n    return (\n        <>\n            <AutoView\n                {...props}\n                schema={optionSchema}\n                onChange={onChange}\n                data={option}\n            />\n            <AutoFields\n                {...props}\n                schema={{...props.schema, ...props.schema.oneOf![option]}}\n            />\n        </>\n    );\n};\n\nexport const repo = new ComponentsRepo('oneof-inside-object-repo', node => {\n    if ('type' in node) {\n        return node.type;\n    }\n\n    if ('oneOf' in node) {\n        return 'oneOf';\n    }\n})\n    .register('string', {\n        name: 'string',\n        component: StringComponent\n    })\n    .register('number', {\n        name: 'number',\n        component: StringComponent\n    })\n    .register('object', {\n        name: 'object',\n        component: ObjectComponent\n    })\n    .register('oneOf', {\n        name: 'oneOfAsEnum',\n        component: OneOfAsEnumComponent\n    })\n    .register(customOneOfType, {\n        name: 'oneOf',\n        component: CustomOneOfComponent\n    });\n","/schema.json":'{\n  "title": "Some form",\n  "type": "object",\n  "properties": {\n    "firstName": {\n      "type": "string",\n      "title": "First name"\n    },\n    "lastName": {\n      "type": "string",\n      "title": "Last name"\n    }\n  },\n  "oneOf": [\n    {\n      "properties": {\n        "homePhone": {\n          "type": "number",\n          "title": "Home phone"\n        }\n      },\n      "required": ["homePhone"]\n    },\n    {\n      "properties": {\n        "mobilePhone": {\n          "type": "number",\n          "title": "Mobile phone"\n        }\n      },\n      "required": ["mobilePhone"]\n    }\n  ]\n}\n'},m={"fast-json-patch":"^3.1.0","@mui/material":"^5.3.1","@emotion/react":"^11.7.1","@emotion/styled":"^11.6.0"},c={activePath:"/App.tsx"},l={"/App.tsx":"import React from 'react';\nimport {\n    AutoView,\n    RepositoryProvider,\n    CoreSchemaMetaSchema\n} from '@autoviews/core';\nimport {Box, Typography} from '@mui/material';\n\nimport schema from './schema.json';\nimport {repo} from './repo';\n\nconst App = () => {\n    const [value, setValue] = React.useState<string>('');\n    const onChange = React.useCallback(e => setValue(e.target.value), []);\n\n    return (\n        <>\n            <RepositoryProvider components={repo}>\n                <AutoView\n                    schema={schema as CoreSchemaMetaSchema}\n                    data={value}\n                    onChange={onChange}\n                />\n            </RepositoryProvider>\n            {value && (\n                <>\n                    <Typography>\n                        <Box\n                            sx={{marginTop: '20px'}}\n                            style={{display: 'flex', alignItems: 'center'}}\n                        >\n                            <span>You just selected</span>\n                            <span\n                                style={{\n                                    background: value,\n                                    display: 'block',\n                                    width: '16px',\n                                    height: '16px',\n                                    margin: '0 10px',\n                                    borderRadius: '4px'\n                                }}\n                            />\n                        </Box>\n                    </Typography>\n                </>\n            )}\n        </>\n    );\n};\n\nexport default App;\n","/repo.tsx":"import React from 'react';\nimport {ComponentsRepo, changeEventHandler, AutoFields} from '@autoviews/core';\nimport {FormControl, InputLabel, Select, MenuItem} from '@mui/material';\n\nexport const repo = new ComponentsRepo('enum-repo', node => {\n    if ('type' in node) {\n        return node.type;\n    }\n\n    if ('oneOf' in node) {\n        return 'oneOf';\n    }\n\n    throw new Error('cannot resolve type');\n});\n\nrepo.register('object', {\n    name: 'object',\n    component: AutoFields\n});\n\nrepo.register('oneOf', {\n    name: 'oneOfAsEnum',\n    component: props => (\n        <FormControl fullWidth>\n            <InputLabel id={props.schema.title}>\n                {props.schema.title}\n            </InputLabel>\n            <Select\n                labelId={props.schema.title}\n                id=\"select\"\n                value={props.data}\n                label={props.schema.title}\n                onChange={changeEventHandler(props, e => e.target.value)}\n            >\n                {props.schema.oneOf!.map(item => (\n                    <MenuItem\n                        key={item.const}\n                        value={item.const}\n                    >\n                        {item.title}\n                    </MenuItem>\n                ))}\n            </Select>\n        </FormControl>\n    )\n});\n","/schema.json":'{\n  "title": "Form",\n  "type": "object",\n  "properties": {\n    "color": {\n      "title": "Favorite color",\n      "oneOf": [\n        {\n          "const": "#c0c0c0",\n          "title": "Silver"\n        },\n        {\n          "const": "#ff00ff",\n          "title": "Fuchsia"\n        },\n        {\n          "const": "#00ff00",\n          "title": "Lime"\n        },\n        {\n          "const": "#800000",\n          "title": "Maroon"\n        },\n        {\n          "const": "#008080",\n          "title": "Teal"\n        }\n      ]\n    }\n  }\n}\n'},u={"fast-json-patch":"^3.1.0","@mui/material":"^5.3.1","@emotion/react":"^11.7.1","@emotion/styled":"^11.6.0"},d={activePath:"/App.tsx"},h={},f="oneOf",C={unversionedId:"subschemas/combiners-oneof",id:"subschemas/combiners-oneof",title:"oneOf",description:"Enum with titles",source:"@site/docs/subschemas/combiners-oneof.md",sourceDirName:"subschemas",slug:"/subschemas/combiners-oneof",permalink:"/autoviews/docs/subschemas/combiners-oneof",draft:!1,editUrl:"https://github.com/wix-incubator/autoviews/tree/master/website/docs/subschemas/combiners-oneof.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"if/then/else",permalink:"/autoviews/docs/subschemas/conditions"},next:{title:"$ref",permalink:"/autoviews/docs/subschemas/combiners-ref"}},b={},y=[{value:"Enum with titles",id:"enum-with-titles",level:2},{value:"OneOf inside object",id:"oneof-inside-object",level:2}],v=(g="CustomOneOfComponent",function(n){return console.warn("Component "+g+" was not imported, exported, or provided by MDXProvider as global scope"),(0,s.kt)("div",n)});var g;const O={toc:y};function w(n){let{components:e,...o}=n;return(0,s.kt)("wrapper",(0,a.Z)({},O,o,{components:e,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"oneof"},"oneOf"),(0,s.kt)("h2",{id:"enum-with-titles"},"Enum with titles"),(0,s.kt)("p",null,"Where dropdown render is needed, ",(0,s.kt)("inlineCode",{parentName:"p"},"enum")," is the first thing that come to mind. Unfortunately, it's lack of titles functionality (enumNames ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/rjsf-team/react-jsonschema-form/issues/532"},"proposal")," wasn't accepted).\nIn this case, ",(0,s.kt)("inlineCode",{parentName:"p"},"oneOf")," + ",(0,s.kt)("inlineCode",{parentName:"p"},"const")," is here to the rescue."),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},"In this example, schema's node with ",(0,s.kt)("inlineCode",{parentName:"p"},"oneOf")," doesn't contain ",(0,s.kt)("inlineCode",{parentName:"p"},"type")," keyword, so repo's ",(0,s.kt)("inlineCode",{parentName:"p"},"getNodeType")," must return ",(0,s.kt)("inlineCode",{parentName:"p"},"oneOf")," type in order to render registered component automatically.\nAlternatively, ",(0,s.kt)("inlineCode",{parentName:"p"},"<RepositoryComponentByType />")," could be used to render ",(0,s.kt)("inlineCode",{parentName:"p"},"oneOf")," component manually inside object component.")),(0,s.kt)(i.B,(0,a.Z)({},r,{mdxType:"Demo"})),(0,s.kt)("h2",{id:"oneof-inside-object"},"OneOf inside object"),(0,s.kt)("p",null,"Common example with form, where only one field is required (",(0,s.kt)("inlineCode",{parentName:"p"},"homePhone")," or ",(0,s.kt)("inlineCode",{parentName:"p"},"mobilePhone"),")."),(0,s.kt)("p",null,"This examples have two different oneOf components, one the same as in previous example, and second one, which is rendered manually as part of object type."),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},"Note, here ",(0,s.kt)(v,{mdxType:"CustomOneOfComponent"})," contains some JSON Schema generation, which could passed to AutoView to automatically render dropdown with registered in repo component.")),(0,s.kt)(i.B,(0,a.Z)({},t,{mdxType:"Demo"})))}w.isMDXComponent=!0}}]);
//# sourceMappingURL=32d91884.121aa950.js.map