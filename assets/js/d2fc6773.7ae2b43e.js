"use strict";(self.webpackChunk_autoviews_website=self.webpackChunk_autoviews_website||[]).push([[806],{2107:function(e,n,t){t.d(n,{B:function(){return p}});var a=t(7294),o=t(2070),r=t(524),i={"@autoviews/core":"latest"};function p(e){var n=(0,r.I)().colorMode;return a.createElement(o.xR,{theme:n,template:"react-ts",customSetup:{files:e.files,dependencies:Object.assign({},i,e.dependencies)},options:Object.assign({showNavigator:!0,editorHeight:500,externalResources:["https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap","https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"]},e.options)})}},4992:function(e,n,t){t.r(n),t.d(n,{dependencies:function(){return o},files:function(){return a},options:function(){return r}});var a={"/App.tsx":"import React from 'react';\nimport {\n    RepositoryProvider,\n    AutoView,\n    CoreSchemaMetaSchema\n} from '@autoviews/core';\n\nimport {data} from './data';\nimport schema from './schema.json';\nimport {repo} from './repo';\nimport {userUISchema} from './UISchema';\n\nexport default function App() {\n    return (\n        <RepositoryProvider components={repo}>\n            <AutoView\n                schema={schema as CoreSchemaMetaSchema}\n                data={data}\n                uiSchema={userUISchema}\n            />\n        </RepositoryProvider>\n    );\n}\n","/repo.tsx":"import React from 'react';\nimport {\n    ComponentsRepo,\n    AutoFields,\n    AutoItems,\n    AutoHeaders\n} from '@autoviews/core';\nimport {\n    Table,\n    TableContainer,\n    Paper,\n    TableHead,\n    TableRow,\n    TableCell,\n    TableBody\n} from '@mui/material';\n\nexport const repo = new ComponentsRepo('MyTableRepo')\n    .register('array', {\n        name: 'MyTableComponent',\n        component: props => {\n            return (\n                <TableContainer\n                    component={Paper}\n                    sx={{margin: '10px'}}\n                >\n                    <Table>\n                        <TableHead>\n                            <TableRow>\n                                <AutoHeaders\n                                    {...props}\n                                    path=\"/items\"\n                                >\n                                    {headerProps => (\n                                        <AutoItems {...headerProps} />\n                                    )}\n                                </AutoHeaders>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            <AutoItems {...props} />\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n            );\n        }\n    })\n    .register('object', {\n        name: 'MyTableRow',\n        component: props => (\n            <TableRow>\n                <AutoFields {...props} />\n            </TableRow>\n        )\n    })\n    .register('string', {\n        name: 'MyStringComponent',\n        component: props => <span>{props.data}</span>\n    })\n    .register('number', {\n        name: 'MyNumberComponent',\n        component: props => <span>{props.data}</span>\n    })\n    .register('boolean', {\n        name: 'MyBooleanComponent',\n        component: props => {\n            const isOnline = props.data;\n            return (\n                <span style={{color: isOnline ? 'green' : 'red'}}>\n                    {isOnline ? 'online' : 'offline'}\n                </span>\n            );\n        }\n    })\n    .addWrapper(item => <TableCell>{item}</TableCell>, {\n        include: [\n            'MyStringComponent',\n            'MyBooleanComponent',\n            'MyNumberComponent'\n        ]\n    });\n","/schema.json":'{\n  "type": "array",\n  "items": {\n    "type": "object",\n    "properties": {\n      "login": {\n        "type": "string",\n        "title": "User Login"\n      },\n      "age": {\n        "type": "number",\n        "title": "Age"\n      },\n      "active": {\n        "type": "boolean",\n        "title": "Status"\n      }\n    }\n  }\n}\n',"/data.ts":"export const data = [\n    {\n        login: 'johondoe',\n        age: 21,\n        active: true\n    },\n    {\n        login: 'janedoe',\n        age: 20,\n        active: false\n    }\n];\n","/UISchema.ts":"import {createUISchema, UISchema} from '@autoviews/core';\n\nexport const userUISchema: UISchema = createUISchema(\n    {},\n    {\n        '/items': {\n            order: ['active', 'login', 'age']\n        }\n    }\n);\n"},o={"@mui/material":"^5.3.1","@emotion/react":"^11.7.1","@emotion/styled":"^11.6.0"},r={activePath:"/App.tsx"}},6132:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return m},default:function(){return k},frontMatter:function(){return l},metadata:function(){return d},toc:function(){return c}});var a=t(5773),o=t(808),r=(t(7294),t(3905)),i=t(2107),p=t(4992),s=["components"],l={},m="Creating Array components",d={unversionedId:"entities/array-components",id:"entities/array-components",title:"Creating Array components",description:"AutoViews does not come with pre-made components to render arrays (doing so will defeat the idea of",source:"@site/docs/entities/array-components.md",sourceDirName:"entities",slug:"/entities/array-components",permalink:"/autoviews/docs/entities/array-components",draft:!1,editUrl:"https://github.com/wix-incubator/autoviews/tree/master/website/docs/entities/array-components.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"The Components Repository",permalink:"/autoviews/docs/entities/components-repo"},next:{title:"Creating Object components",permalink:"/autoviews/docs/entities/object-components"}},u={},c=[{value:"AutoItems",id:"autoitems",level:2},{value:"<code>AutoItems</code> props",id:"autoitems-props",level:3},{value:"the render function",id:"the-render-function",level:3},{value:"Example - rendering a plain list",id:"example---rendering-a-plain-list",level:3},{value:"Example - rendering an HTML list",id:"example---rendering-an-html-list",level:3},{value:"Example - rending an HTML table",id:"example---rending-an-html-table",level:3},{value:"Example - rending an HTML Table with headers (AutoHeaders)",id:"example---rending-an-html-table-with-headers-autoheaders",level:3},{value:"AutoHeaders",id:"autoheaders",level:4}],h={toc:c};function k(e){var n=e.components,t=(0,o.Z)(e,s);return(0,r.kt)("wrapper",(0,a.Z)({},h,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"creating-array-components"},"Creating Array components"),(0,r.kt)("p",null,"AutoViews does not come with pre-made components to render arrays (doing so will defeat the idea of\nusing your own components). However, AutoViews provides utilities and APIs to create your own components\nto render arrays."),(0,r.kt)("p",null,"The simplest array component will be"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"new ComponentsRepo('ArrayRepo').register('array', {\n  name: 'tableComponent',\n  component: props => <AutoItems {...props} />\n});\n")),(0,r.kt)("h2",{id:"autoitems"},"AutoItems"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"AutoItems")," is a utility element used to render the elements of the array.\nInternally it apply ",(0,r.kt)("inlineCode",{parentName:"p"},"AutoViews")," for each of the items of the array."),(0,r.kt)("p",null,"It can be used with array of objects, strings, numbers or other types, including mixed type arrays, delegating\nto ",(0,r.kt)("inlineCode",{parentName:"p"},"AutoViews")," to render the actual item."),(0,r.kt)("h3",{id:"autoitems-props"},(0,r.kt)("inlineCode",{parentName:"h3"},"AutoItems")," props"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"extending ",(0,r.kt)("inlineCode",{parentName:"li"},"AutoViewProps")," - getting the same properties as ",(0,r.kt)("inlineCode",{parentName:"li"},"AutoViews")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"render")," - optional callback to apply to each of the rendered array elements")),(0,r.kt)("h3",{id:"the-render-function"},"the render function"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"declare function render(\n  item: React.ReactNode,\n  props: AutoViewProps,\n  index: number\n): React.ReactNode;\n")),(0,r.kt)("p",null,"The render callback parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"item")," - the rendered item, rendered using ",(0,r.kt)("inlineCode",{parentName:"li"},"AutoViews"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"props")," - the ",(0,r.kt)("inlineCode",{parentName:"li"},"AutoViewProps")," used to render the item."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"index")," - the index of the item in the array")),(0,r.kt)("h3",{id:"example---rendering-a-plain-list"},"Example - rendering a plain list"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"new ComponentsRepo('ArrayRepo').register('array', {\n  name: 'tableComponent',\n  component: props => <AutoItems {...props} />\n});\n")),(0,r.kt)("h3",{id:"example---rendering-an-html-list"},"Example - rendering an HTML list"),(0,r.kt)("p",null,"This example renders an HTML list.\nThe example is using ",(0,r.kt)("inlineCode",{parentName:"p"},"AutoItems.render")," to wrap the per item element (",(0,r.kt)("inlineCode",{parentName:"p"},"node")," below) with the list ",(0,r.kt)("inlineCode",{parentName:"p"},"<li>")," element."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"new ComponentsRepo('ArrayRepo').register('array', {\n  name: 'tableComponent',\n  component: props => (\n    <ul>\n      <AutoItems\n        {...props}\n        render={node => <li>node</li>}\n      ></AutoItems>\n    </ul>\n  )\n});\n")),(0,r.kt)("h3",{id:"example---rending-an-html-table"},"Example - rending an HTML table"),(0,r.kt)("p",null,"Assuming out data has the form ",(0,r.kt)("inlineCode",{parentName:"p"},"Array<object>"),",\nThis example renders the table using ",(0,r.kt)("inlineCode",{parentName:"p"},"AutoItems")," which delegates to ",(0,r.kt)("inlineCode",{parentName:"p"},"AutoViews")," to render\nthe ",(0,r.kt)("inlineCode",{parentName:"p"},"object"),". AutoViews will then use the ",(0,r.kt)("inlineCode",{parentName:"p"},"tablrRowComponent"),", which renders the ",(0,r.kt)("inlineCode",{parentName:"p"},"<tr>")," element\nand is using the ",(0,r.kt)("inlineCode",{parentName:"p"},"AutoFields")," to render the members of the object.\nthe example is also using the ",(0,r.kt)("inlineCode",{parentName:"p"},"AutoFields.render")," property to wrap the fields controls with ",(0,r.kt)("inlineCode",{parentName:"p"},"<td>")," elements."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"new ComponentsRepo('ArrayRepo')\n  .register('array', {\n    name: 'tableComponent',\n    component: props => (\n      <table>\n        <tbody>\n          <AutoItems {...props} />\n        </tbody>\n      </table>\n    )\n  })\n  .register('object', {\n    name: 'tableRowComponent',\n    component: props => (\n      <tr>\n        <AutoFields\n          {...props}\n          render={node => <td>node</td>}\n        />\n      </tr>\n    )\n  });\n")),(0,r.kt)("h3",{id:"example---rending-an-html-table-with-headers-autoheaders"},"Example - rending an HTML Table with headers (AutoHeaders)"),(0,r.kt)("p",null,"While rendering an array of objects as a table, displaying a proper header based on ",(0,r.kt)("inlineCode",{parentName:"p"},"JSONSchema")," is tricky. First, you must extract the ",(0,r.kt)("inlineCode",{parentName:"p"},"title")," from each node or the object's field name."),(0,r.kt)("p",null,"Moreover, it is needed to consider all structural rules applied for that schema, like ",(0,r.kt)("a",{parentName:"p",href:"/docs/entities/ui-schema#the-hints-ui-hint"},(0,r.kt)("inlineCode",{parentName:"a"},"UIHints"))," or ",(0,r.kt)("inlineCode",{parentName:"p"},"pick")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"omit")," ",(0,r.kt)("a",{parentName:"p",href:"/docs/basic/autoview#properties-of-the-autoview-component"},"properties"),"."),(0,r.kt)("p",null,"It was inconvenient to do it manually, even though we provided utils to extract ",(0,r.kt)("inlineCode",{parentName:"p"},"UIHints")," and order fields according to rules. So we are introducing the ",(0,r.kt)("inlineCode",{parentName:"p"},"AutoHeaders")," component."),(0,r.kt)("h4",{id:"autoheaders"},"AutoHeaders"),(0,r.kt)("p",null,"To render a table with a header, you can find the ",(0,r.kt)("inlineCode",{parentName:"p"},"AutoHeaders")," helpful component."),(0,r.kt)("p",null,"This component requires you to path ",(0,r.kt)("a",{parentName:"p",href:"/docs/basic/autoview#properties-of-the-autoview-component"},(0,r.kt)("inlineCode",{parentName:"a"},"AutoViewProps"))," and an optional:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"path"),": the ",(0,r.kt)("inlineCode",{parentName:"li"},"JSONPointer")," to object schema relative to its ",(0,r.kt)("inlineCode",{parentName:"li"},"props.schema"),"; if your schema type is ",(0,r.kt)("inlineCode",{parentName:"li"},"array"),", then you might want to path ",(0,r.kt)("inlineCode",{parentName:"li"},"/items"),". The default value is root: ",(0,r.kt)("inlineCode",{parentName:"li"},"''"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useAsValue"),": possible values are ",(0,r.kt)("inlineCode",{parentName:"li"},"field")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"title"),"; by using it, you define what should be used as header value, either object's property name or schema's ",(0,r.kt)("inlineCode",{parentName:"li"},"title")," field value.")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"children")," type is ",(0,r.kt)("inlineCode",{parentName:"p"},"(props: AutoViewProps) => JSX.Element;"),".\nA function that would get a new ",(0,r.kt)("inlineCode",{parentName:"p"},"AutoViewProps")," as an argument and would contain ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," as an ",(0,r.kt)("inlineCode",{parentName:"p"},"string[]")," and a new ",(0,r.kt)("inlineCode",{parentName:"p"},"JSONSchema")," for an array of strings."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"// Having this schema\nconst schema: CoreSchemaMetaSchema = {\n  type: 'object',\n  properties: {\n    foo: {type: 'string', title: 'Foo'},\n    bar: {type: 'string', title: 'Bar'},\n    baz: {type: 'number', title: 'Baz'}\n}\n//...\n<AutoHeaders schema={schema}>\n    {props => {\n        /*\n         * The new `props.data` would be `['Foo', 'Bar', 'Baz']`.\n         * And the new `props.schema` would complement this data\n        */\n        return <AutoItems {...props} />\n    }}\n</AutoHeaders>\n")),(0,r.kt)("p",null,"Let's look at full example of table with header."),(0,r.kt)(i.B,(0,a.Z)({},p,{mdxType:"Demo"})))}k.isMDXComponent=!0}}]);
//# sourceMappingURL=d2fc6773.7ae2b43e.js.map