{"version":3,"file":"assets/js/c3cd0188.dcfb7f44.js","mappings":"kVAAA,MCQaA,EAAmB,CAC5B,WCTJ,qhCDUI,aEVJ,6HFWI,YGXJ,uxEHYI,mBIZJ,qLJaI,mBDbJ,uLCgBaC,EAAiC,CAC1C,kBAAmB,SACnB,gBAAiB,SACjB,iBAAkB,UAClB,kBAAmB,WAGVC,EAAuB,CAChCC,WAAY,YKdHC,EAAc,CAAC,EACfC,EAAe,OACfC,EAAW,CACtB,cAAiB,2BACjB,GAAM,2BACN,MAAS,OACT,YAAe,mEACf,OAAU,yCACV,cAAiB,aACjB,KAAQ,4BACR,UAAa,2CACb,OAAS,EACT,QAAW,kGACX,KAAQ,GACR,QAAW,UACX,YAAe,CAAC,EAChB,QAAW,YACX,SAAY,CACV,MAAS,QACT,UAAa,+CAGJC,EAAS,CAEtB,EAIaC,EAAM,CAAC,CAClBC,MAAO,eACPC,GAAI,eACJC,MAAO,GACN,CACDF,MAAO,mCACPC,GAAI,kCACJC,MAAO,IAGHC,EAAc,CAClBJ,OAGa,SAASK,EAAW,GAG/B,IAH+B,WACjCC,KACGC,GACJ,EACC,OAAO,QALS,WAKC,UAAKH,EAAiBG,EAAK,CAAED,WAAYA,EAAYE,QAAQ,eAC5E,cACE,GAAM,OACH,SAGL,iBAAK,SAAO,sBAAYC,WAAW,KAAM,QAAqB,2IACc,sBAAYA,WAAW,KAAM,0BAAuC,MAChJ,oBAAK,gBAAMA,WAAW,MAClB,UAAa,eACV,4HAOP,iBAAK,2DAAyD,sBAAYA,WAAW,KAAM,QAAqB,gDAA8C,sBAAYA,WAAW,KAAM,mBAAgC,cAC3N,oBAAK,gBAAMA,WAAW,MAClB,UAAa,eACV,6FAIP,iBAAK,sEAAoE,sBAAYA,WAAW,KAAM,QAAqB,qBAAmB,sBAAYA,WAAW,KAAM,eAA4B,oCACvM,oBAAK,gBAAMA,WAAW,MAClB,UAAa,eACV,kIAQP,sBACE,KAAQ,SACP,aAAGA,WAAW,cAAe,gCAA8B,sBAAYA,WAAW,KAAM,eAA4B,6BAA2B,sBAAYA,WAAW,KAAM,QAAqB,gCAA8B,sBAAYA,WAAW,KAAM,aAA0B,gFACzR,cACE,GAAM,gBACH,iBACL,QAAC,KAAI,UAAKC,EAAG,CAAEF,QAAQ,WACvB,cACE,GAAM,mCACH,oCAET,CAEAH,EAAWM,gBAAiB,C","sources":["webpack://@autoviews/website/./src/examples/subschemas/ref/UserSchema.json","webpack://@autoviews/website/./src/examples/subschemas/ref/index.ts","webpack://@autoviews/website/./src/examples/subschemas/ref/app.tsx","webpack://@autoviews/website/./src/examples/subschemas/ref/data.json","webpack://@autoviews/website/./src/examples/subschemas/ref/repo.tsx","webpack://@autoviews/website/./src/examples/subschemas/ref/BookSchema.json","webpack://@autoviews/website/./docs/subschemas/combiners-ref.md"],"sourcesContent":["export default \"{\\n  \\\"$id\\\": \\\"UserSchemaId\\\",\\n  \\\"type\\\": \\\"object\\\",\\n  \\\"properties\\\": {\\n    \\\"firstName\\\": {\\n      \\\"type\\\": \\\"string\\\"\\n    },\\n    \\\"lastName\\\": {\\n      \\\"type\\\": \\\"string\\\"\\n    }\\n  }\\n}\\n\";","import {DemoDependencies, DemoFiles, DemoOptions} from '@site/src/components';\n\nimport userSchema from './UserSchema.json?raw-loader';\nimport bookSchema from './BookSchema.json?raw-loader';\nimport data from './data.json?raw-loader';\nimport repo from './repo.tsx?raw-loader';\nimport app from './app.tsx?raw-loader';\n\nexport const files: DemoFiles = {\n    '/App.tsx': app,\n    '/data.json': data,\n    '/repo.tsx': repo,\n    '/BookSchema.json': bookSchema,\n    '/UserSchema.json': userSchema\n};\n\nexport const dependencies: DemoDependencies = {\n    'fast-json-patch': '^3.1.0',\n    '@mui/material': '^5.3.1',\n    '@emotion/react': '^11.7.1',\n    '@emotion/styled': '^11.6.0'\n};\n\nexport const options: DemoOptions = {\n    activePath: '/App.tsx'\n};\n","export default \"import React from 'react';\\nimport {\\n    AutoView,\\n    RepositoryProvider,\\n    CoreSchemaMetaSchema,\\n    createUISchema\\n} from '@autoviews/core';\\nimport {Box} from '@mui/material';\\n\\nimport userSchema from './UserSchema.json';\\nimport bookSchema from './BookSchema.json';\\nimport data from './data.json';\\nimport {repo} from './repo';\\n\\nconst uiSchema = createUISchema({\\n    [repo.name]: {\\n        '/properties/name': {\\n            name: 'title'\\n        }\\n    }\\n});\\n\\nconst App = () => {\\n    return (\\n        <Box>\\n            <RepositoryProvider\\n                components={repo}\\n                schemas={[userSchema, bookSchema] as CoreSchemaMetaSchema[]}\\n            >\\n                <AutoView\\n                    uiSchema={uiSchema}\\n                    schema={bookSchema as CoreSchemaMetaSchema}\\n                    data={data}\\n                    metadata={{'The Fellowship of the Ring': 'tfotr.jpg'}}\\n                />\\n            </RepositoryProvider>\\n        </Box>\\n    );\\n};\\n\\nexport default App;\\n\";","export default \"{\\n  \\\"name\\\": \\\"The Fellowship of the Ring\\\",\\n  \\\"author\\\": {\\n    \\\"firstName\\\": \\\"Obi-Wan\\\",\\n    \\\"lastName\\\": \\\"Kenobi\\\"\\n  }\\n}\\n\";","export default \"import React from 'react';\\nimport {\\n    AutoViewProps,\\n    ComponentsRepo,\\n    AutoFields,\\n    RefComponent\\n} from '@autoviews/core';\\nimport {Card, CardMedia, Box, Typography} from '@mui/material';\\n\\nconst staticPath = '/img/examples/ref/';\\nconst host = 'localhost:3000'; // TODO: make it env variable, or calculated\\n\\nconst StringTitleComponent: React.FC<AutoViewProps> = ({data}) => (\\n    <Typography variant=\\\"body1\\\">{data}</Typography>\\n);\\n\\nconst StringComponent: React.FC<AutoViewProps> = ({data}) => (\\n    <span>{data}</span>\\n);\\n\\nexport const repo = new ComponentsRepo('ref-example-repo', node => {\\n    if ('$ref' in node) {\\n        return '$ref';\\n    }\\n\\n    if ('type' in node) {\\n        return node.type;\\n    }\\n\\n    throw new Error('cannot resolve type');\\n});\\n\\nrepo.register('string', {\\n    name: 'title',\\n    component: StringTitleComponent\\n});\\n\\nrepo.register('string', {\\n    name: 'basic',\\n    component: StringComponent\\n});\\n\\nrepo.register('object', {\\n    name: 'regularObject',\\n    component: props => (\\n        <dl style={{margin: 0}}>\\n            <Typography variant=\\\"body2\\\">\\n                <AutoFields {...props} />\\n            </Typography>\\n        </dl>\\n    )\\n});\\n\\nrepo.register('object', {\\n    name: 'root',\\n    component: props => (\\n        <Card sx={{display: 'flex'}}>\\n            <Box sx={{padding: '20px'}}>\\n                <CardMedia\\n                    component=\\\"img\\\"\\n                    height=\\\"140\\\"\\n                    image={\\n                        'http://' +\\n                        host +\\n                        staticPath +\\n                        props.metadata[props.data.name]\\n                    }\\n                    alt={props.data}\\n                />\\n            </Box>\\n            <Box\\n                sx={{display: 'flex', flexDirection: 'column', padding: '10px'}}\\n            >\\n                <AutoFields {...props} />\\n            </Box>\\n        </Card>\\n    ),\\n    predicate: node => node.$id && node.$id === 'BookSchemaId'\\n});\\n\\nrepo.register('$ref', {\\n    name: 'oneOfAsEnum',\\n    component: RefComponent\\n});\\n\\nrepo.addWrapper(\\n    (item, props) => (\\n        <>\\n            <dt>{props.field + ': '}</dt>\\n            <dd>{item}</dd>\\n        </>\\n    ),\\n    {include: ['basic']}\\n);\\n\";","export default \"{\\n  \\\"$id\\\": \\\"BookSchemaId\\\",\\n  \\\"type\\\": \\\"object\\\",\\n  \\\"properties\\\": {\\n    \\\"name\\\": {\\n      \\\"type\\\": \\\"string\\\"\\n    },\\n    \\\"author\\\": {\\n      \\\"$ref\\\": \\\"UserSchemaId\\\"\\n    }\\n  }\\n}\\n\";","\n\n/* @jsxRuntime classic */\n/* @jsx mdx */\n/* @jsxFrag React.Fragment */\n\nimport React from 'react';\nimport { mdx } from '@mdx-js/react';\n\n\nexport const frontMatter = {};\nexport const contentTitle = '$ref';\nexport const metadata = {\n  \"unversionedId\": \"subschemas/combiners-ref\",\n  \"id\": \"subschemas/combiners-ref\",\n  \"title\": \"$ref\",\n  \"description\": \"With $ref keyword schema can reference another schema or itself.\",\n  \"source\": \"@site/docs/subschemas/combiners-ref.md\",\n  \"sourceDirName\": \"subschemas\",\n  \"slug\": \"/subschemas/combiners-ref\",\n  \"permalink\": \"/autoviews/docs/subschemas/combiners-ref\",\n  \"draft\": false,\n  \"editUrl\": \"https://github.com/wix-incubator/autoviews/tree/master/website/docs/subschemas/combiners-ref.md\",\n  \"tags\": [],\n  \"version\": \"current\",\n  \"frontMatter\": {},\n  \"sidebar\": \"mySidebar\",\n  \"previous\": {\n    \"title\": \"oneOf\",\n    \"permalink\": \"/autoviews/docs/subschemas/combiners-oneof\"\n  }\n};\nexport const assets = {\n\n};\n\nimport {Demo} from '@site/src/components';\nimport * as ref from '../../src/examples/subschemas/ref';\nexport const toc = [{\n  value: 'Full example',\n  id: 'full-example',\n  level: 2\n}, {\n  value: 'example with jsonSchemaResolver?',\n  id: 'example-with-jsonschemaresolver',\n  level: 2\n}];\n\nconst layoutProps = {\n  toc\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h1 {...{\n      \"id\": \"ref\"\n    }}>{`$ref`}</h1>\n\n\n    <p>{`With `}<inlineCode parentName=\"p\">{`$ref`}</inlineCode>{` keyword schema can reference another schema or itself.\nTo make this work, all referred schemas must be in context by passing them to `}<inlineCode parentName=\"p\">{`<RepositoryProvider />`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`<RepositoryProvider\n  components={repo}\n  schemas={[jsonSchema1, jsonSchema2]}\n>\n  // ...\n</RepositoryProvider>\n`}</code></pre>\n    <p>{`Next, repository should have component, which resolves `}<inlineCode parentName=\"p\">{`$ref`}</inlineCode>{`. Ready-to-go component is available within `}<inlineCode parentName=\"p\">{`@autoviews/core`}</inlineCode>{` package.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`import {RefComponent} from '@autoviews/core';\n\nrepo.register('$ref', RefComponent);\n`}</code></pre>\n    <p>{`To make AutoViews automatically render this component when facing `}<inlineCode parentName=\"p\">{`$ref`}</inlineCode>{` keyword, repo's `}<inlineCode parentName=\"p\">{`getNodeType`}</inlineCode>{` should return keyword as type:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`new ComponentsRepo('example-repo', node => {\n  if ('$ref' in node) {\n    return '$ref';\n  }\n\n  return node.type;\n});\n`}</code></pre>\n    <admonition {...{\n      \"type\": \"note\"\n    }}><p parentName=\"admonition\">{`Order of resolving types in `}<inlineCode parentName=\"p\">{`getNodeType`}</inlineCode>{` does matter. By placing `}<inlineCode parentName=\"p\">{`$ref`}</inlineCode>{` condition before returning `}<inlineCode parentName=\"p\">{`node.type`}</inlineCode>{` all references will be resolved at the beginning of processing each node.`}</p></admonition>\n    <h2 {...{\n      \"id\": \"full-example\"\n    }}>{`Full example`}</h2>\n    <Demo {...ref} mdxType=\"Demo\" />\n    <h2 {...{\n      \"id\": \"example-with-jsonschemaresolver\"\n    }}>{`example with jsonSchemaResolver?`}</h2>\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n"],"names":["files","dependencies","options","activePath","frontMatter","contentTitle","metadata","assets","toc","value","id","level","layoutProps","MDXContent","components","props","mdxType","parentName","ref","isMDXComponent"],"sourceRoot":""}